# Clase 07/03/23 #
## Resumen ##
### Resolución de problemas ###

Empezamos la jornada revisando la tarea del día anterior, vimos que para poder solucionar el problema de nuestro compañero fuimos a la interface implementation, cambiamos el nombre de MueblesSevice a MuebleService, En la clase Mueble agregamos el NoArgsConstructor y en la clase MuebleController cambiamos la variable que decía mueblesService a muebleService y en MuebleService solo agregamos la anotación @Primary y con esto quedaba solucionado el problema.  

Corriendo el programa.

![image](https://user-images.githubusercontent.com/123017277/223582036-c1fdba31-f551-466c-8623-d3ef8d324508.png)

Corremos el programa y corre sin ningún problema.

![image](https://user-images.githubusercontent.com/123017277/223582185-f9231b1a-a069-4286-bf0e-fab1775fee7f.png)

si cambiamos el nombre de la variable de muebleService a mueblesService que se supone no debería importar, pero hace que el programa falle

Hasta aquí todo funciona bien 

![image](https://user-images.githubusercontent.com/123017277/223582463-5f326172-c031-407f-b84a-a628a70add2c.png)

Al ir al navegador el programa falla

![image](https://user-images.githubusercontent.com/123017277/223582970-dda6ba34-660a-485f-bcad-b0048baeb02e.png)

Si regresamos a los datos anteriores ya funciona correctamente, el error, ya que Spring Boot no les ha hecho New hasta que se invocaba en el navegador, entonces cuando tenemos las cosas mal el programa arranca, pero al llegar a la implementación MuebleService el programa parece tener una confusión con ibatis, puesto que no reconocía que no era una interface de base de datos.

### VueJS ###

Ingresamos a la máquina virtual ubuntu que creo el profesor e ingresamos a eclipse con el programa en la rama database damos pull y ya obtenemos los últimos cambios que realizamos al programa.

![image](https://user-images.githubusercontent.com/123017277/223614266-44942bf6-889d-45b5-b870-7410a2cbe186.png)

Corremos el programa y arranca sin problemas.

![image](https://user-images.githubusercontent.com/123017277/223614929-d90fc2f7-b00e-473d-8c2e-895176a9926f.png)

En esta ocasión usaremos otro IDE llamado Visual Studio Code el cual nos va a ayudar a hacer la parte del frontend

![image](https://user-images.githubusercontent.com/123017277/223621052-5a91075d-dd08-4032-87ff-a036cf52829b.png)

Con el comando npm run serve iniciamos el servidor local

![image](https://user-images.githubusercontent.com/123017277/223621223-c86192e5-679c-42cc-9a22-4bf7474ee327.png)

Ahora en el navegador escribimos la URL localhost:8081 y podemos ver la siguiente pantalla

![image](https://user-images.githubusercontent.com/123017277/223621441-843652a2-eb11-4957-9cbb-aeb083977f1c.png)

Vamos al archivo LoginView en el VSC cuando modificamos el archivo LoginView y salvamos podemos ver inmediatamente en el navegador los cambos realizados(renderizado automático)

![vue](https://user-images.githubusercontent.com/123017277/223623174-37e25770-a65e-40ed-8d7d-b8acc24cde86.gif)

Del lado izquierdo de VSC tenemos un explorador donde podemos ver los directorios y archivo dentro de nuestro proyecto.

![image](https://user-images.githubusercontent.com/123017277/223625286-ae526c6d-077f-4d04-9d4c-167ac088d088.png)

los primeros directorios son .vscode que no importa si está o no, los directorios node_modules, public y src los cuales son importantes y obligatorios en el proyecto.

![image](https://user-images.githubusercontent.com/123017277/223625646-57a6e0c4-dd0e-47d7-abd7-afce5a298f34.png)

dentro del directorio public debemos de tener los archivos favicon.ico e index.html

![image](https://user-images.githubusercontent.com/123017277/223625994-2ed5602f-fac7-4289-abca-0d2529b0c1b3.png)

El directorio más importante es el directorio src, ya que es donde vamos a trabajar más del 95% del tiempo, dentro del directorio tenemos los siguientes directorios

![image](https://user-images.githubusercontent.com/123017277/223626201-fc525277-8037-4373-bbf4-3aebf3cbee9d.png)

assets: en este directorio podemos poner las imágenes o videos que deseamos mostrar en nuestra página

![image](https://user-images.githubusercontent.com/123017277/223627727-5d0f71ad-7bb4-4aab-b75f-2ebf481d56f2.png)

router y store: solo tienen un archivo adentro llamado index.js

![image](https://user-images.githubusercontent.com/123017277/223628037-9d8cd0aa-8daf-43cd-bf80-cfce5e3a471e.png)

components: fragmentos de HTML que no son una página, los archivos que creemos en este directorio deben de llevar en el nombre la palabra component. 

![image](https://user-images.githubusercontent.com/123017277/223628187-9394b1bb-f11e-40a2-ac3f-fafe343cf995.png)

![image](https://user-images.githubusercontent.com/123017277/223628758-ce5098ae-c058-4752-a44e-697742620af2.png)

Views: En este directorio vamos a encontrar las páginas, los nombres de los archivos están compuestos por 2 palabras, por ejemplo LoginView, ForbidenView, etc.

![image](https://user-images.githubusercontent.com/123017277/223629305-10de4a44-d276-4335-9406-6da16a9a5acd.png)

Hay una regla en vue y es que todo lo que se encuentre dentro de las etiquetas template debe de estar dentro de una única etiqueta, cuando tenemos más de 1 etiqueta debería arrojar un error.

![image](https://user-images.githubusercontent.com/123017277/223630305-84117b2c-3c3c-4ad5-98ca-f1d628a4f06f.png)

En este ejemplo que nos mostró el profe no nos arrojó ningún error.

![image](https://user-images.githubusercontent.com/123017277/223630073-fd334b26-522c-4ac2-a433-035ee1e1618e.png)

Ya que en vue 3 si permite tener más de un root node para no generar problemas, vamos a seguir la regla de que solo debe tener una etiqueta.

Continuando con nuestro ejercicio vamos a usar una extensión que se llama axios cada archivo vue va a tener 3 secciones, la primera es template de la cual hablamos anteriormente, la siguiente es script que cuando lo generamos ya tiene algo de código escrito, la última sección es Style que es una hoja de estilos donde podemos dar estilo a nuestra página.

![image](https://user-images.githubusercontent.com/123017277/223635345-55b7b0ed-213b-478a-964c-09d2160954d0.png)

En script y template vamos a escribir el siguiente código, salvamos y cuando vamos a la página en el browser
```javascript
<template>
      <h1>Login View xyz</h1>
      <h2 @click = "avisa" >Salomón</h2>      
</template>
```

```javascript
<script>
export default {
    data: function () {
        return {
            mensaje: 'Hola mundo',
            mensaje2: 'Hola mundo 2',
            mensaje3: 'Hola mundo 3',
            mensaje4: 'Hola mundo 4',
        }
    },
    methods: {
        avisa: function() {
            console.log(this.mensaje)
            console.log(this.mensaje2)
            console.log(this.mensaje3)
            console.log(this.mensaje4)
        }
    }
}
</script>
 ```   
 Al actualizar la página y dar clic en el nombre vemos el siguiente resultado en la consola.
 
 ![image](https://user-images.githubusercontent.com/123017277/223639591-8313719d-daab-443c-9952-676675b64243.png)

Ahora vamos a crear un nuevo methods llamado, carga dentro del script con el siguiente código, también modificamos en template.
```javascript
<template>
      <h1>Login View xyz</h1>
      <h2 @click = "carga" >Salomón</h2>      
</template>
```

```javascript
carga: function() {
            axios.get('http://localhost:8080/pro/muebles', {
              }).then(response => {
                console.log(response.data)
                  this.mensaje4 = response.data; 
              })
        }
```
Al actualizar el browser nos indica que hay un error, ya que la página que invoca nuestro código se encuentra bloqueada, por lo que es necesario agregar una línea de código en eclipse para que pueda aceptar peticiones
```
package com.example.helloworld;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

import lombok.extern.slf4j.Slf4j;

@SuppressWarnings("unused")
@Configuration
@Slf4j
public class WebMvcConfig implements WebMvcConfigurer {
    /** {@inheritDoc}/
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        //
        log.info("Disabling CORS");
        registry
            .addMapping("/")
            .allowedOrigins("*")
            .allowedMethods("GET", "POST","PUT", "DELETE", "OPTIONS", "HEAD");
        /**/
    }
}
```

Con este codigo ya nuestro codigo en vue  puede realizar las consultas necesarias
